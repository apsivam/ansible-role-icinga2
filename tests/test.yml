---

- hosts: all
  become: True
  vars:
    mysql_databases:
      - name: icinga
        collation: utf8_general_ci
        encoding: utf8
    mysql_users:
      - name: icinga
        host: "%"
        password: icinga
        priv: "'icinga'.*:ALL"
    mysql_root_password: super-secure-password
    icinga2_master_fqdn: localhost
    icinga2_role: master
    icinga2_features: [ "ido-mysql", "checker", "api", "notification", "mainlog" ]
    icinga2_manage_mysql: true
    icinga2_ido_dbname: icinga
    icinga2_ido_user: icinga
    icinga2_ido_password: icinga
    icinga2_endpoints:
      "{{hostvars[inventory_hostname]['ansible_fqdn']}}":
        host: "{{hostvars[inventory_hostname]['ansible_fqdn']}}"
    icinga2_zones:
      master:
        endpoints:
          - "{{hostvars[inventory_hostname]['ansible_fqdn']}}"
      director-global:
        global: true
      global-templates:
        global: true
      roles:
        - geerlingguy.mysql
        - role_under_test
